# üìå –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** Docker –∏ Docker Compose

## –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

``` bash
git clone https://github.com/Sashatank2003/avito_intern.git
cd test_avito
```

## –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

``` bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∏ –ë–î (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏)
docker-compose up

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d
```

üí° **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
—Å–µ—Ä–≤–∏—Å–∞.

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

``` bash
# Health check
curl http://localhost:8080/health
# –û—Ç–≤–µ—Ç: {"status":"ok"}

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl http://localhost:8080/stats
# –û—Ç–≤–µ—Ç: {"total_prs":0,"open_prs":0,...}
```

------------------------------------------------------------------------

## –°—Ç–µ–∫:

-   **Go 1.23** --- —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
-   **Gin** --- HTTP framework
-   **PostgreSQL 16** --- –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
-   **pgx/v5** --- PostgreSQL driver c connection pool
-   **sqlc** --- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ SQL
-   **OpenAPI** --- —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API
-   **Docker Compose** --- –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è

------------------------------------------------------------------------

#  –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–æ–≤
``` bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose up -d

# 2. –î–æ–∂–¥–∞—Ç—å—Å—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
curl http://localhost:8080/health

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç—ã
make test-e2e
```


------------------------------------------------------------------------

#  –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
``` bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker-compose up postgres -d

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-up

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test-integration
```
# üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
``` bash
make build              # –°–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make run                # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
make test               # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
make lint               # –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
```
## Docker –∫–æ–º–∞–Ω–¥—ã
``` bash
make docker-up          # –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose
make docker-down        # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å volumes
make docker-up-clean    # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω—É–ª—è
```
## –ú–∏–≥—Ä–∞—Ü–∏–∏
``` bash
make migrate-up         # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (localhost:5434)
make migrate-down       # –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
```
# üí° –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ PR-–ø—Ä–æ—Ü–µ—Å—Å–∞

## ‚ú® –°–æ–∑–¥–∞–Ω–∏–µ PR
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –¥–æ –¥–≤—É—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–≤—å—é–µ—Ä–æ–≤**.
- –ö–∞–Ω–¥–∏–¥–∞—Ç—ã –±–µ—Ä—É—Ç—Å—è **–∏–∑ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ—Ä–∞ PR**.
- **–°–∞–º –∞–≤—Ç–æ—Ä –≤ –≤—ã–±–æ—Ä–∫–µ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç**.
- –û—Ç–±–æ—Ä –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Fisher‚ÄìYates shuffle**.

---

## üîÅ –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–∞
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–≤—å—é–µ—Ä–∞ –Ω–∞ –¥—Ä—É–≥–æ–≥–æ**.
- –ù–æ–≤—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è **–∏–∑ –∫–æ–º–∞–Ω–¥—ã —Ç–æ–≥–æ, –∫–æ–≥–æ –∑–∞–º–µ–Ω—è—é—Ç**.
- –ò–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è:
  - –∞–≤—Ç–æ—Ä PR,
  - –≤—Å–µ —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ —Ä–µ–≤—å—é–µ—Ä—ã.
- ‚ö†Ô∏è **–ü–æ—Å–ª–µ merge –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º.**

---

## üîÄ Merge
- Merge –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è**.
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏:
  - `status` –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ `MERGED`
  - `merged_at` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è.
- –ü–æ—Å–ª–µ merge **–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–∞–≤ —Ä–µ–≤—å—é–µ—Ä–æ–≤ –±–æ–ª—å—à–µ –Ω–µ–ª—å–∑—è**.





